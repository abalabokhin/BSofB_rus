BEGIN L#RVCHI1

//START 

CHAIN IF ~Global("L#RVGhostEncounter","GLOBAL",1)~ THEN L#RVCHI1 L#CHILD.START.00
@0
END
IF~~THEN REPLY @1 EXTERN L#RVCHI1 L#CHILD.START.01
IF~~THEN REPLY @2 EXTERN L#RVCHI1 L#CHILD.START.01
IF~~THEN REPLY @3 EXTERN L#RVCHI1 L#CHILD.START.02

CHAIN L#RVCHI1 L#CHILD.START.01
@4
==IMOEN2J IF ~InParty("imoen2") !StateCheck("imoen2",CD_STATE_NOTVALID)~ THEN @5
==NALIAJ IF ~InParty("nalia") !StateCheck("nalia",CD_STATE_NOTVALID)~ THEN @6
==L#RVCHI1 @7
END
IF~~THEN REPLY @8 EXTERN L#RVCHI1 L#CHILD.START.03
IF~~THEN REPLY @9 EXTERN L#RVCHI1 L#CHILD.START.02

CHAIN L#RVCHI1 L#CHILD.START.03
@10
END
IF~~THEN REPLY @11 EXTERN L#RVCHI1 L#CHILD.START.04
IF~~THEN REPLY @12 EXTERN L#RVCHI1 L#CHILD.START.02

CHAIN L#RVCHI1 L#CHILD.START.04
@13
DO ~SetGlobal("L#RVGhostEncounter","GLOBAL",2) StartCutScene("L#RVCS03")~ EXIT

CHAIN L#RVCHI1 L#CHILD.START.02
@14
DO ~SetGlobal("L#RVGhostEncounter","GLOBAL",-1) DestroySelf()~ EXIT

//AFTER GHOSTS

CHAIN IF ~Global("L#RVGhostEncounter","GLOBAL",3)~ THEN L#RVCHI1 L#CHILD.START.20
@15
END
IF~~THEN REPLY @16 EXTERN L#RVCHI1 L#CHILD.START.21
IF~~THEN REPLY @17 EXTERN L#RVCHI1 L#CHILD.START.21
IF~~THEN REPLY @18 EXTERN L#RVCHI1 L#CHILD.START.21

CHAIN L#RVCHI1 L#CHILD.START.21
@19
END
IF~~THEN REPLY @20 EXTERN L#RVCHI1 L#CHILD.START.22
IF~~THEN REPLY @21 EXTERN L#RVCHI1 L#CHILD.START.22

CHAIN L#RVCHI1 L#CHILD.START.22
@22
==L#RVCHI1 @23
==MINSCJ IF ~InParty("minsc") !StateCheck("minsc",CD_STATE_NOTVALID)~ THEN @24
==KELDORJ IF ~InParty("keldorn") !StateCheck("keldorn",CD_STATE_NOTVALID)~ THEN @25
==VICONIJ IF ~InParty("viconia") !StateCheck("viconia",CD_STATE_NOTVALID)~ THEN @26
==L#RVCHI1 @27
END
IF~~THEN REPLY @28 EXTERN L#RVCHI1 L#CHILD.START.23
IF~~THEN REPLY @29 EXTERN L#RVCHI1 L#CHILD.START.23

CHAIN L#RVCHI1 L#CHILD.START.23
@30
==L#RVCHI1 @31
==NEERAJ IF ~InParty("neera") !StateCheck("neera",CD_STATE_NOTVALID)~ THEN @32
==L#RVCHI1 @33
==L#RVCHI1 @34
==HEXXATJ IF ~InParty("hexxat") !StateCheck("hexxat",CD_STATE_NOTVALID)~ THEN @35
==L#RVCHI1 @36
==L#RVCHI1 @37
END
IF~~THEN REPLY @38 EXTERN L#RVCHI1 L#CHILD.START.24
IF~~THEN REPLY @39 EXTERN L#RVCHI1 L#CHILD.START.25
IF~~THEN REPLY @40 EXTERN L#RVCHI1 L#CHILD.START.02

CHAIN L#RVCHI1 L#CHILD.START.24
@41
END
IF~~THEN REPLY @42 EXTERN L#RVCHI1 L#CHILD.START.25
IF~~THEN REPLY @43 EXTERN L#RVCHI1 L#CHILD.START.02

CHAIN L#RVCHI1 L#CHILD.START.25
@44
==L#RVCHI1 @45
DO ~SetGlobal("L#RVGhostEncounter","GLOBAL",4) CreateVisualEffectObject("SPCLOUD1",Myself) ActionOverride(Player1,AddSpecialAbility("L#RVCHSU")) DestroySelf()~ EXIT

