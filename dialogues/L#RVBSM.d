BEGIN L#RVBSM 

//FIRST

CHAIN IF ~NumTimesTalkedTo(0)~ THEN L#RVBSM BLACKSMITH00.00
@0
END
IF~~THEN REPLY @1 EXTERN L#RVBSM BLACKSMITH00.01
IF~~THEN REPLY @2 EXTERN L#RVBSM BLACKSMITH00.01

CHAIN L#RVBSM BLACKSMITH00.01
@3
END
IF~~THEN REPLY @4 EXTERN L#RVBSM BLACKSMITH00.02
IF~~THEN REPLY @5 EXTERN L#RVBSM BLACKSMITH00.02
IF~~THEN REPLY @6 EXTERN L#RVBSM BLACKSMITH00.02

CHAIN L#RVBSM BLACKSMITH00.02
@7
END
IF~~THEN REPLY @8 EXTERN L#RVBSM BLACKSMITH00.03
IF~~THEN REPLY @9 EXIT
IF~~THEN REPLY @10 EXIT

CHAIN L#RVBSM BLACKSMITH00.03
@11
END
IF~~THEN REPLY @12 EXTERN L#RVBSM BLACKSMITH00.04
IF~PartyHasItem("L#RVBSW1")~THEN REPLY @13 EXTERN L#RVBSM BLACKSMITH00.05
IF~PartyHasItem("L#RVBJOU")~THEN REPLY @14 EXTERN L#RVBSM BLACKSMITH00.06
IF~~THEN REPLY @15 EXIT

//USUAL

CHAIN IF ~NumTimesTalkedToGT(0)~ THEN L#RVBSM BLACKSMITH01.00
@16
END
IF~~THEN REPLY @17 EXTERN L#RVBSM BLACKSMITH00.04
IF~PartyHasItem("L#RVBSW1")~THEN REPLY @18 EXTERN L#RVBSM BLACKSMITH00.05
IF~PartyHasItem("L#RVBJOU")~THEN REPLY @19 EXTERN L#RVBSM BLACKSMITH00.06
IF~~THEN REPLY @20 EXIT

CHAIN L#RVBSM BLACKSMITH00.04
@21
DO ~StartStore("L#RVBSM",LastTalkedToBy())~ EXIT

CHAIN L#RVBSM BLACKSMITH00.05
@22
==KORGANJ IF ~InParty("korgan") !StateCheck("korgan",CD_STATE_NOTVALID)~ THEN @23
==L#RVBSM @24
==L#RVBSM @25
DO ~TakePartyItem("L#RVBSW1") DestroyItem("L#RVBSW1") GiveItemCreate("L#RVBSW2",Player1,1,1,0) SetGlobal("L#RVSwordFixed","GLOBAL",1) AddexperienceParty(3000)~ EXIT

CHAIN L#RVBSM BLACKSMITH00.06
@26
END
IF~~THEN REPLY @27 EXTERN L#RVBSM BLACKSMITH00.07
IF~~THEN REPLY @28 EXTERN L#RVBSM BLACKSMITH00.08
IF~~THEN REPLY @29 EXTERN L#RVBSM BLACKSMITH00.09

CHAIN L#RVBSM BLACKSMITH00.07
@30
==JaheiraJ IF ~InParty("jaheira") !StateCheck("jaheira",CD_STATE_NOTVALID)~ THEN @31
==L#RVBSM @32
DO ~TakePartyItem("L#RVBJOU") DestroyItem("L#RVBJOU") SetGlobal("L#RVSmithsMemories","GLOBAL",1) AddStoreItem("l#rvbsm","l#rvbgh1",1,1) AddexperienceParty(600)~ EXIT

CHAIN L#RVBSM BLACKSMITH00.08
@33
==HAERDAJ IF ~InParty("haerdalis") !StateCheck("haerdalis",CD_STATE_NOTVALID)~ THEN @34
==L#RVBSM @35
DO ~TakePartyItem("L#RVBJOU") DestroyItem("L#RVBJOU") SetGlobal("L#RVSmithsMemories","GLOBAL",1) AddStoreItem("l#rvbsm","l#rvbgh2",1,1) AddexperienceParty(600)~ EXIT

CHAIN L#RVBSM BLACKSMITH00.09
@36
==AerieJ IF ~InParty("aerie") !StateCheck("aerie",CD_STATE_NOTVALID)~ THEN @37
==L#RVBSM @38
DO ~TakePartyItem("L#RVBJOU") DestroyItem("L#RVBJOU") SetGlobal("L#RVSmithsMemories","GLOBAL",1) AddStoreItem("l#rvbsm","l#rvbgh3",1,1) AddexperienceParty(600)~ EXIT